
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>使用Auto Sprites自动合并图片 - Web 前端开发</title>
    <meta name="author" content="蓝面小生">
    
	<meta name="description" content="Auto Sprites是我在国际站开发的用于自动合并CSS图片的工具，原本计划部署在服务器端进行自动合并和实时合并，但是因为服务器代码确保稳定性，迭代
的周期过慢，所以先释出线下版本。 使用工具输出的Sprites图片 特性： 支持四种合并方式，智能判断合并方式 CSS 书写要求： &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Web 前端开发" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="http://use.typekit.net/gis6vng.js"></script>
    <script>
        try { Typekit.load(); } catch (e) {}
    </script>


    

</head>


<body>

<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<header  class="site-header" role="banner">
    <div class="site-header-inner">
        <hgroup>
            <h1 class="site-title">Web 前端开发</h1>
            <h2 class="site-description">蓝面小生的部落格</h2>
        </hgroup>

        <nav id="site-navigation" class="main-navigation" role="navigation">
            <ul class="nav-menu">
            <li><a href="/index.html">首页</a></li>
                <li><a href="/blog/archives/index.html">文章</a>  </li>
                <li><a href="/atom.xml">RSS</a> </li>

                
                <li>
                    <form class="pure-form" method="get" action="/search.html">
                        <input type="text" name="query" class="pure-input-rounded">
                        <button type="submit" class="pure-button">Search</button>
                    </form>
                </li>
                
            </ul>
        </nav>


    </div>
</header>
<div class="site">
    <div class="site-user">
        <div class="site-bg">
            <a href=""><img src="" class="header-image" width="" height="" alt="" /></a>
        </div>
        <div class="site-user-info">
            <div class="site-user-name">
                <div class="site-user-avator">

                    <img src="/images/avator.jpg" width=90 height=90/>
                </div>
                <span class="desc">xing.gex </span>
            </div>
            <div class="site-user-desc">F2E in Alibaba.com | Write SimpleUI Library | Work At HangZhou China</div>
        </div>
    </div>
    <div class="main-content clear">
        <div class="site-side">
            <section>
  <h2 class="section-title">最新文章</h2>
  <ul id="recent_posts" class="section-list">
    
      <li>
        <a href="/blog/guan-yu-javascriptshu-zu-de-xiang-guan-zhi-shi/">关于JavaScript数组的一点小技巧</a>
      </li>
    
      <li>
        <a href="/blog/shi-yong-auto-spriteszi-dong-he-bing-tu-pian/">使用Auto Sprites自动合并图片</a>
      </li>
    
      <li>
        <a href="/blog/xie-zai-2014chu/">写在2014初</a>
      </li>
    
  </ul>
</section>

            <section>
    <h2 class="section-title">最新评论</h2>
    <ul class="ds-recent-comments section-list" data-num-items="10" data-show-avatars="1" data-show-time="0" data-show-title="0" data-show-admin="0" data-excerpt-length="18"></ul>
    
</section>

        </div>
        <div id="content" class="site-content">
            <article class="single-post post">
	<h2 class="post-title">使用Auto Sprites自动合并图片</h2>
	<div class="entry-content"><p>Auto Sprites是我在国际站开发的用于自动合并CSS图片的工具，原本计划部署在服务器端进行自动合并和实时合并，但是因为服务器代码确保稳定性，迭代
的周期过慢，所以先释出线下版本。</p>

<h2>使用工具输出的Sprites图片</h2>

<p><img src="/images/sprites-smart.png" alt="smartSprites"/></p>

<h2>特性：</h2>

<p>支持四种合并方式，智能判断合并方式</p>

<h2>CSS 书写要求：</h2>

<p>由于无法解析组合类，所以要求引用的图片和样式写在一个选择器里面，无法找到的图片将被忽略.</p>

<!-- more -->


<p>例如下面的写法将导致解析<strong>错误</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'>  <span class="nc">.icon</span><span class="p">{</span>
</span><span class='line'>      <span class="k">background</span><span class="o">:</span><span class="sx">url(/images/icon.png)</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nc">.icon-add</span><span class="p">{</span>
</span><span class='line'>      <span class="k">background-position</span><span class="o">:-</span><span class="m">10px</span> <span class="m">-10px</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>正确的书写方式</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'>  <span class="nc">.icon-add</span><span class="p">{</span>
</span><span class='line'>      <span class="k">background</span><span class="o">:</span><span class="sx">url(/images/icon-add.png)</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nc">.icon-del</span><span class="p">{</span>
</span><span class='line'>      <span class="k">background</span><span class="o">:</span><span class="sx">url(/images/icon-del.png)</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>使用方式：</h2>

<h3>使用npm安装Auto Sprites</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">auto</span><span class="o">-</span><span class="nx">sprites</span> <span class="o">-</span><span class="nx">g</span>
</span></code></pre></td></tr></table></div></figure>


<h3>编译CSS文件</h3>

<blockquote><p>指定source和target的时候需要使用相对于root的绝对路径</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="nx">sprites</span> <span class="o">&lt;</span><span class="nx">root</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">source</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">target</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">sprites</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">base64</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">level</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4><code>root</code></h4>

<p>文件存放的根目录，比如 htdocs</p>

<h4><code>source</code></h4>

<p>指定编译的文件夹，比如<code>/css</code></p>

<h4><code>target</code></h4>

<p>指定编译后文件存放的位置 比如<code>/css-target</code></p>

<h4><code>sprites</code></h4>

<p>指定图片文件存放的位置, 比如<code>/simg</code></p>

<h4><code>base64</code></h4>

<p>是否启用base64编码</p>

<h4><code>level</code></h4>

<p>以文件或者文件夹的维度合并图片,默认值为<code>file</code></p>

<h2>Bug 反馈</h2>

<p><a target="_blank" href="https://github.com/windyGex/auto-sprites/issues">Github Issues</a></p>
</div>

<div class="meta">
	
</div>
</article>

	



<section class="post-comments">
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title=""></div>
<script type="text/javascript">
    var duoshuoQuery = {short_name:"qianduan"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- Duoshuo Comment END -->
</div>
</section>



        </div>
    </div>

</div>
<footer id="footer">
    <div class="footer">
    Copyright &copy; 2014
    
    蓝面小生
    . Powered by <a href="http://octopress.org">Octopress</a>
</div>
</footer>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<!-- Duoshuo Comment BEGIN -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"qianduan"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- Duoshuo Comment END -->
</body>
</html>
